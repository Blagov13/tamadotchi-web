<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagotchi MVP</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .pet { font-size: 50px; }
        .status, .energy, .hunger, .coins { margin: 10px 0; }
        button, input { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    <h1 id="petNameTitle">–ú–æ–π –ø–∏—Ç–æ–º–µ—Ü</h1>
    <input type="text" id="petNameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–∏—Ç–æ–º—Ü–∞" style="display: none;">
    <button onclick="setPetName()" id="setNameButton">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–º—è</button>
    <div class="pet" id="petEmoji">üê∂</div>
    <div class="status">–°–æ—Å—Ç–æ—è–Ω–∏–µ: üòä</div>
    <div class="energy">–≠–Ω–µ—Ä–≥–∏—è: 100</div>
    <div class="hunger">–ì–æ–ª–æ–¥: 50</div>
    <div class="coins">–ú–æ–Ω–µ—Ç—ã: 50</div>
    <button onclick="feedPet()" id="feedButton">–ö–æ—Ä–º–∏—Ç—å</button>
    <button onclick="playWithPet()" id="playButton">–ò–≥—Ä–∞—Ç—å</button>
    <button onclick="restPet()" id="restButton">–û—Ç–¥—ã—Ö</button>
    <button onclick="buyFood()" id="buyFoodButton">–ö—É–ø–∏—Ç—å –µ–¥—É (10 –º–æ–Ω–µ—Ç)</button>
    <button onclick="workPet()" id="workButton">–†–∞–±–æ—Ç–∞—Ç—å (5 –º–æ–Ω–µ—Ç, -10 —ç–Ω–µ—Ä–≥–∏–∏)</button>
    <button onclick="revivePet()" id="reviveButton" style="display: none;">–í–æ–∑—Ä–æ–¥–∏—Ç—å</button>
    <button onclick="befriendPet()" id="befriendButton">–ü–æ–¥—Ä—É–∂–∏—Ç—å—Å—è —Å –ø–∏—Ç–æ–º—Ü–µ–º</button>
    <button onclick="giftCoins()" id="giftButton">–ü–æ–¥–∞—Ä–∏—Ç—å 10 –º–æ–Ω–µ—Ç –¥—Ä—É–≥—É</button>
    <button onclick="racePet()" id="raceButton">–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∑–∞–±–µ–≥–µ</button>

    <script>
        let petName = localStorage.getItem("petName") || "";
        let petMood = localStorage.getItem("petMood") || "üòä";
        let petEnergy = parseInt(localStorage.getItem("petEnergy")) || 100;
        let petHunger = parseInt(localStorage.getItem("petHunger")) || 50;
        let deathTimer = parseInt(localStorage.getItem("deathTimer")) || 0;
        let isDead = localStorage.getItem("isDead") === "true";
        let coins = parseInt(localStorage.getItem("coins")) || 50;
        let petForm = localStorage.getItem("petForm") || "üê∂";
        let evolutionTimer = parseInt(localStorage.getItem("evolutionTimer")) || 0;
        let friends = JSON.parse(localStorage.getItem("friends")) || [];

        const statusElement = document.querySelector(".status");
        const energyElement = document.querySelector(".energy");
        const hungerElement = document.querySelector(".hunger");
        const coinsElement = document.querySelector(".coins");
        const petEmoji = document.getElementById("petEmoji");

        function updateStatus() {
            if (isDead) {
                petMood = "üíÄ";
            } else {
                if (petEnergy < 30 || petHunger >= 80) {
                    petMood = "üò©";
                }
            }
            statusElement.innerText = "–°–æ—Å—Ç–æ—è–Ω–∏–µ: " + petMood;
            energyElement.innerText = "–≠–Ω–µ—Ä–≥–∏—è: " + petEnergy;
            hungerElement.innerText = "–ì–æ–ª–æ–¥: " + petHunger;
            coinsElement.innerText = "–ú–æ–Ω–µ—Ç—ã: " + coins;
            petEmoji.innerText = petForm;
            localStorage.setItem("petMood", petMood);
            localStorage.setItem("petEnergy", petEnergy);
            localStorage.setItem("petHunger", petHunger);
            localStorage.setItem("deathTimer", deathTimer);
            localStorage.setItem("isDead", isDead);
            localStorage.setItem("coins", coins);
            localStorage.setItem("petForm", petForm);
            localStorage.setItem("evolutionTimer", evolutionTimer);
            localStorage.setItem("friends", JSON.stringify(friends));
        }

        function befriendPet() {
            let friendName = prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–∏—Ç–æ–º—Ü–∞ –¥—Ä—É–≥–∞:");
            if (friendName && !friends.includes(friendName)) {
                friends.push(friendName);
                alert(`–¢–µ–ø–µ—Ä—å –≤—ã –¥—Ä—É–∑—å—è —Å ${friendName}!`);
                updateStatus();
            }
        }

        function giftCoins() {
            if (coins >= 10 && friends.length > 0) {
                coins -= 10;
                alert("–í—ã –ø–æ–¥–∞—Ä–∏–ª–∏ 10 –º–æ–Ω–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –¥—Ä—É–∑–µ–π!");
                updateStatus();
            } else {
                alert("–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç –∏–ª–∏ –Ω–µ—Ç –¥—Ä—É–∑–µ–π!");
            }
        }

        function racePet() {
            if (petEnergy < 20) {
                alert("–í–∞—à –ø–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –∑–∞–±–µ–≥–µ!");
                return;
            }
            let raceResult = Math.random() > 0.5;
            if (raceResult) {
                coins += 20;
                petEnergy -= 10;
                alert("–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –≤—ã–∏–≥—Ä–∞–ª –∑–∞–±–µ–≥ –∏ –ø–æ–ª—É—á–∏–ª 20 –º–æ–Ω–µ—Ç!");
            } else {
                petEnergy -= 15;
                alert("–£–≤—ã, –≤–∞—à –ø–∏—Ç–æ–º–µ—Ü –ø—Ä–æ–∏–≥—Ä–∞–ª –∑–∞–±–µ–≥. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!");
            }
            updateStatus();
        }

        updateStatus();
    </script>
</body>
</html>


